#pragma once

#include "ConfigDllExportUIManagement.h"
#include <QtWidgets/QMainWindow>
#include "MotionHubUtil/Console.h"
#include "CreateTrackerWindow.h"
#include "QtCore/qstringlistmodel.h"
#include "QtCore/qstring.h"

namespace Ui
{
	class MainWindow;
}

/*!
 * \class MainWindow
 * 
 * \brief Qt main Window wrapper containing slot methods
 * 
 * \author Eric Jansen and Kester Evers
 * 
 */
class UIManagement_DLL_import_export MainWindow : public QMainWindow
{
	Q_OBJECT
public:

	/*!
	 * default constructor  
	 */
	explicit MainWindow(TrackerManager* trackerManager, QWidget *parent = 0);
	/*!
	 * default destructor 
	 */
	~MainWindow();


private slots:
	/*!
	 * slot for start/stop button 
	 */
	void slotStartTracker();
	/*!
	 * slot for "add" tracker button 
	 */
	void slotAddTracker();
	/*!
	 * slot for "remove" tracker button
	 */
	void slotRemoveTracker();
	void on_actionExit_triggered();

private:
	/*!
	 * qt class generated by the moc
	 */
	Ui::MainWindow *ui;

	TrackerManager* m_refTrackerManager;
	/*!
	 * createTracker dialog 
	 */
	CreateTrackerWindow* m_createTrackerWindow;
	/*!
	 * removes tracker from List view widget
	 *  
	 * \param id the id to remove
	 */
	void removeTrackerFromList(int id);
	/*!
	 *  tracking state for changing icon
	 */
	bool m_isTracking = false;

	void toggleIconStartButton();

	void update();

	void updateHirachy();

	std::thread* m_updateThread;

	std::map<std::pair<TrackerManager::TrackerType, int>, Tracker*>* m_refTrackerPool;
};